# ✅ **Candi 開発タスクチェックリスト（AI エージェント最適化版）**

---

## **フェーズ 0：環境の安定化**

### 🔧 プロジェクト / 開発環境（ローカル & AI IDE）

- [x] GitHub リポジトリ `kosuke-t-hara/candi` を最新化する
- [x] `main` ブランチを基準に開発フロー決定（PR or trunk-based）
- [x] ローカル環境で `npm install` / `pnpm install` 実行
- [x] `.env.local` に Supabase の鍵（URL・anon key）をセット
- [x] CodeX / Antigravity にリポジトリの構造を読み込ませる
  - 「このリポジトリの全体構造を解析して」と促す
- [x] Lint と型チェックの自動実行を有効化 (`eslint`, `tsc`)

---

## **フェーズ 1：認証（ログインまわり）**

### 🔐 Supabase Auth の導入

- [x] Supabase プロジェクトで email/pass 認証を有効化
- [x] Next.js App Router と Supabase Auth helpers の導入
- [x] `/login` ページを作成
- [x] `/signup` ページを作成
- [x] 認証後のリダイレクト設定（`/` に飛ばす）
- [x] セッション保持（Middleware で保護ルートを設定）
- [x] `profiles` テーブルと自動同期（初回ログイン時に row 作成）
  - `spec/db/02_auth_triggers.sql` を作成しました。Supabase SQL エディタで実行してください。

---

## **フェーズ 2：データモデルの実装**

### 📚 テーブル（あなたが作った定義がベース）

- [x] `profiles`
- [x] `applications`
- [x] `application_events`
- [x] `growth_logs`

### 🔄 API / Server Actions

- [x] Supabase クライアントの共通ユーティリティ作成 (`lib/supabase`)
- [x] applications CRUD
- [x] application_events CRUD
- [x] growth_logs CRUD
- [x] RLS policy の確認・強化（ユーザー自身のデータのみ参照）
  - `spec/db/03_rls_policies.sql` を作成しました。

---

## **フェーズ 3：UI 実装（v0 ベース → ローカルへ移行）**

### 🧩 Home ダッシュボード（/）

- [x] TO-DO ボックス
- [x] 今週の予定（日ごとカード UI）
- [x] 月曜〜日曜カードに "応募" + "成長ログ" を並列表示
- [x] タブフィルタ（すべて / 転職活動 / 成長ログ）
- [x] 当週の転職活動件数 / 成長ログ件数の集計
  - Server Actions (`getApplications`, `getGrowthLogs`) と接続し、リアルデータを表示するようにしました。
  - 新規案件登録フォーム (`NewOpportunityBottomSheet`) を `createApplication` アクションに接続しました。
  - イベント追加 (`ApplicationDetailModal` -> `HomePageClient`) を `createEvent` アクションに接続しました。

### 📋 応募詳細ページ（/applications/[id]）

- [ ] 最近のイベントタイムライン
- [ ] ステータス更新 UI
- [ ] メモ欄

### 🌱 成長ログ（/growth）

- [ ] ログ一覧
- [ ] ログ登録
- [ ] ログを案件とは別テーブルで扱う
- [ ] タグ or カテゴリ分類

---

## **フェーズ 4：生成 AI 活用ポイントの埋め込み**

### 🤖 AI が動きやすい構造化データ化

- [ ] application_events の種類を enum-like にする
- [ ] growth_logs のカテゴリを固定語彙化
- [ ] ユーザー行動ログ（閲覧・更新）を計測（任意）

### 🧠 AI 機能

- [ ] 「今日の 1 問」生成（プロフィール + 最近の成長ログから文脈生成）
- [ ] 応募の成功率ヒント（イベント履歴から AI 推定）
- [ ] 面接対策サマリー（応募情報 + 会社情報）
- [ ] 1 週間の振り返りレポート生成

---

## **フェーズ 5：本番運用準備**

### 🚀 デプロイ / 安定化

- [ ] Vercel に環境変数を設定
- [ ] Supabase に接続できるか動作確認
- [ ] RLS の最終チェック
- [ ] 日次バッチ or Edge Function（候補）

---

# ✨ **AI エージェント用タスク形式（貼るだけで動く）**

以下を CodeX / Antigravity にそのまま貼って OK：

---

## **「Candi 開発タスク一覧（実行順）」**

```
1. プロジェクトの依存関係をインストールし、環境変数を設定する
2. Supabase 認証（ログイン / サインアップ）を Next.js に統合する
3. 認証後にユーザープロフィールを自動作成する処理を実装する
4. applications / application_events / growth_logs のCRUDを作成する
5. RLS ポリシーを適切に設定し、ユーザー本人のみ参照可能にする
6. Home 画面のカードUI（日ごとカード + タブフィルタ）を作る
7. 成長ログを応募データとは別のストリームとして扱い、UIに統合する
8. TO-DO ボードのCRUDを作る
9. AI機能（今日の1問・週次振り返り）を追加する
10. Vercel デプロイと Supabase 接続確認を行う
```
